<script lang="ts">
	import { onMount } from 'svelte';
	import '@fontsource/source-code-pro';
	import { SAMPLE_ORDERS } from '../alg/packing';
	import Order from './Order.svelte';

	onMount(() => {
		const it = document.querySelector('.it')!;
		const text = 'IT';
		it.textContent = '';
		// @ts-ignore
		it.style.opacity = '1';
		let i = 0;
		const interval = setInterval(() => {
			it.textContent += text[i];
			i++;
			if (i === text.length) {
				clearInterval(interval);
			}
		}, 500);

		return () => {
			clearInterval(interval);
		};
	});

	let orders = SAMPLE_ORDERS;
</script>

<main class="flex flex-col gap-8 justify-center w-5/6 mx-auto py-6">
	<div class="flex gap-4 mx-auto items-center">
		<svg
			stroke="currentColor"
			class="h-8 w-8"
			fill="url(#grad1)"
			stroke-width="0"
			viewBox="0 0 16 16"
			xmlns="http://www.w3.org/2000/svg"
		>
			<linearGradient id="grad1" x1="0%" x2="100%" y1="0%" y2="0%">
				<stop offset="0%" stop-color="#e11d48" />
				<stop offset="100%" stop-color="#9f1239" />
			</linearGradient>
			<path
				d="M15.528 2.973a.75.75 0 0 1 .472.696v8.662a.75.75 0 0 1-.472.696l-7.25 2.9a.75.75 0 0 1-.557 0l-7.25-2.9A.75.75 0 0 1 0 12.331V3.669a.75.75 0 0 1 .471-.696L7.443.184l.004-.001.274-.11a.75.75 0 0 1 .558 0l.274.11.004.001 6.971 2.789Zm-1.374.527L8 5.962 1.846 3.5 1 3.839v.4l6.5 2.6v7.922l.5.2.5-.2V6.84l6.5-2.6v-.4l-.846-.339Z"
			/></svg
		>
		<h1 class="text-white text-4xl">
			Pack<span class="it opacity-0 text-rose-600" />
		</h1>
	</div>
	<div class="flex flex-col gap-12">
		{#each [...orders] as [orderID, order]}
			{#if !order.done}
				<a href="/{orderID}/find">
					<Order {orderID} {...order} />
				</a>
			{:else}
				<Order {orderID} {...order} />
			{/if}
		{/each}
	</div>
	<div class="absolute bottom-0">
		<svg
			xmlns="http://www.w3.org/2000/svg"
			version="1.0"
			viewBox="0 0 5000 5000"
			width="100%"
			fill="red"
			preserveAspectRatio="xMidYMid meet"
		>
			<g>
				<path
					d="M20 47205 l0 -2796 56 -122 c79 -175 237 -478 337 -648 260 -444 509 -790 934 -1300 1517 -1822 2356 -3157 2663 -4242 68 -239 103 -434 103 -577 1 -164 -14 -245 -141 -740 -81 -317 -95 -403 -95 -585 0 -82 0 -215 0 -295 -1 -450 -1 -453 22 -557 46 -219 148 -446 311 -692 164 -247 354 -474 693 -828 188 -197 260 -285 382 -468 472 -710 723 -1682 775 -3000 19 -488 -33 -1316 -145 -2323 -66 -586 -133 -1092 -290 -2177 -194 -1338 -264 -1901 -311 -2495 -20 -259 -30 -1346 -14 -1580 45 -652 230 -982 577 -1032 482 -70 772 506 902 1792 57 558 72 970 78 2095 7 1260 -2 1714 -72 3980 -14 440 -30 953 -35 1140 -28 898 -23 1967 11 2560 71 1244 269 1934 597 2088 85 40 167 45 292 19 328 -68 548 -250 720 -594 150 -303 233 -635 360 -1448 117 -747 170 -1017 262 -1340 283 -989 789 -1530 1613 -1725 266 -63 681 -92 936 -66 428 44 769 196 1047 466 175 169 286 326 401 566 179 374 280 815 311 1364 16 275 6 1221 -14 1440 -42 449 -103 804 -208 1205 -61 233 -63 284 -24 503 137 772 515 1618 1021 2292 157 209 257 326 425 499 620 636 1288 998 2070 1121 142 23 568 31 737 16 593 -56 1194 -266 1808 -634 267 -159 395 -256 571 -432 665 -662 1050 -1784 1168 -3405 57 -775 43 -1513 -50 -2720 -65 -850 -155 -1709 -330 -3160 -266 -2208 -316 -2664 -378 -3410 -64 -769 -80 -1213 -73 -2040 6 -631 14 -813 52 -1090 75 -543 215 -900 439 -1121 83 -81 180 -140 300 -182 87 -30 98 -32 251 -32 169 0 230 12 339 67 484 244 739 1070 786 2552 10 330 4 1655 -10 2006 -40 1045 -87 1708 -280 3995 -236 2783 -305 4015 -271 4810 44 1026 166 1683 396 2123 237 454 568 619 1044 522 120 -24 217 -58 325 -112 120 -60 192 -112 297 -217 306 -305 473 -792 521 -1517 10 -153 9 -225 -5 -471 -30 -513 -76 -938 -222 -2053 -197 -1499 -214 -1689 -224 -2470 -8 -599 -2 -899 24 -1095 76 -576 279 -893 640 -997 113 -33 371 -32 523 0 158 34 329 89 413 133 232 121 369 364 435 769 14 87 18 200 21 670 7 854 -8 1030 -206 2411 -133 924 -174 1248 -210 1664 -44 501 -47 662 -20 960 75 817 310 1402 726 1806 217 210 438 346 745 459 229 85 470 134 827 170 380 39 610 90 873 196 501 201 892 532 1233 1044 134 201 194 308 325 571 125 252 245 532 412 958 327 836 426 1074 568 1368 257 531 489 878 805 1202 501 514 1104 801 1900 905 219 29 444 39 745 33 664 -13 1054 -89 1456 -286 654 -322 1078 -912 1298 -1811 126 -514 188 -1157 166 -1706 -34 -823 -119 -1604 -346 -3178 -262 -1820 -323 -2330 -355 -2999 -16 -347 -7 -1307 15 -1492 59 -490 181 -804 388 -1001 172 -163 348 -227 623 -227 233 0 398 45 562 153 413 272 629 860 684 1866 13 252 7 1538 -10 1799 -49 781 -96 1270 -256 2670 -173 1516 -228 2103 -256 2756 -13 292 -5 522 27 803 87 774 326 1205 739 1336 98 31 290 37 495 16 633 -67 1132 -28 1526 119 293 110 540 292 751 554 46 58 146 198 220 311 299 451 442 601 671 707 258 119 653 129 1052 26 585 -151 966 -578 1114 -1253 124 -566 103 -946 -144 -2610 -106 -710 -145 -1015 -171 -1335 -15 -191 -21 -985 -8 -1170 32 -456 159 -723 403 -847 220 -111 658 -98 909 28 298 149 446 429 475 894 10 148 8 822 -3 965 -27 386 -106 821 -320 1765 -192 846 -258 1173 -304 1515 -47 352 -50 412 -21 578 78 459 305 741 686 852 170 50 260 58 570 51 376 -8 536 8 778 75 809 227 1507 946 1980 2037 l66 153 0 2464 0 2465 -24990 0 -24990 0 0 -2795z m43731 -3105 c412 -51 683 -139 897 -290 242 -170 410 -439 503 -803 11 -44 18 -81 16 -83 -2 -3 -14 22 -26 54 -91 251 -275 520 -463 679 -251 211 -487 312 -978 418 -91 20 -169 37 -175 40 -27 10 78 3 226 -15z m-8576 -510 c276 -12 450 -31 645 -70 441 -88 769 -249 1046 -513 273 -260 470 -584 638 -1049 48 -133 140 -447 151 -514 l6 -39 -17 29 c-9 16 -51 120 -94 230 -109 280 -113 292 -171 418 -393 861 -1119 1346 -2214 1478 -354 43 -353 45 10 30z m-17080 -4200 c824 -75 1447 -385 1924 -956 249 -298 471 -710 626 -1159 4 -11 -33 54 -82 145 -239 445 -426 705 -707 985 -556 555 -1247 844 -2186 916 -142 11 -681 7 -895 -6 -56 -3 -45 0 50 15 105 16 448 54 575 63 111 8 596 6 695 -3z m-1407 -87 c-10 -2 -26 -2 -35 0 -10 3 -2 5 17 5 19 0 27 -2 18 -5z m28295 -1385 c-13 -464 53 -871 184 -1133 97 -192 208 -308 397 -412 l61 -34 -65 6 c-175 17 -283 67 -400 184 -94 94 -147 183 -193 321 -101 305 -103 752 -6 1173 12 48 22 87 24 87 2 0 1 -87 -2 -192z m-21438 -904 c243 -65 470 -257 631 -530 68 -116 126 -252 152 -359 20 -82 36 -173 29 -165 -3 3 -21 48 -42 100 -96 241 -207 413 -379 586 -179 179 -337 278 -566 356 l-115 39 115 -5 c63 -3 142 -13 175 -22z m-19290 -858 c-17 -56 -42 -226 -50 -336 -19 -269 65 -666 194 -917 26 -51 44 -90 40 -87 -17 10 -131 168 -171 237 -184 315 -213 681 -78 1006 27 67 67 141 75 141 2 0 -3 -20 -10 -44z m3528 -1395 c294 -77 527 -328 652 -704 44 -132 41 -162 -5 -46 -78 196 -150 316 -250 418 -156 159 -450 290 -649 291 -243 0 -471 -191 -597 -502 -21 -51 -34 -73 -34 -58 0 56 33 161 82 260 44 88 65 118 132 185 93 92 189 147 303 170 91 19 264 13 366 -14z m29161 -2871 c56 -582 225 -1012 483 -1225 37 -31 114 -83 171 -116 56 -33 102 -62 102 -65 0 -15 -178 26 -268 62 -187 73 -343 234 -427 443 -35 86 -71 224 -90 351 -24 154 -30 524 -14 839 l14 266 11 -240 c6 -132 14 -274 18 -315z m-27716 -710 c259 -643 614 -1061 1107 -1300 204 -99 446 -173 720 -220 139 -24 479 -60 561 -60 32 0 55 -2 52 -5 -24 -24 -507 -34 -683 -15 -877 96 -1505 636 -1794 1543 -40 128 -92 348 -90 390 0 12 22 -41 48 -118 27 -77 62 -174 79 -215z m14717 -2195 c57 -254 162 -517 274 -687 134 -202 338 -358 502 -384 37 -6 40 -8 21 -15 -13 -5 -58 -11 -100 -15 -258 -22 -465 114 -596 390 -103 216 -167 570 -165 911 l1 160 18 -120 c10 -66 30 -174 45 -240z m-3775 -7017 c154 -667 459 -1096 859 -1207 41 -11 76 -23 79 -26 11 -11 -129 -4 -200 9 -299 58 -515 295 -656 723 -69 208 -125 505 -136 728 l-6 100 20 -117 c10 -64 29 -159 40 -210z m-14675 -283 c83 -330 215 -550 393 -653 l57 -33 -50 6 c-225 30 -385 224 -449 542 -29 146 -46 420 -29 482 4 17 13 -16 28 -105 12 -71 34 -178 50 -239z"
				/>
			</g>
		</svg>
	</div>
</main>

<style>
	span.it {
		font-family: 'Source Code Pro', monospace;
	}
</style>
